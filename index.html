<!DOCTYPE html>
<!-- this is trailrunner
  it's a static HTML/JS page that I'm using to experiment with JSPM and automerge-repo
-->
<html>
  <style>
    body {
      margin: 0;
      width: 100vw;
      height: 100vh;
    }

    #root {
      width: 100%;
      height: 100%;
    }
  </style>
  <script type="module">
    // First, spawn the serviceworker.
    navigator.serviceWorker.register("service-worker.js", { type: "module" }).then(
      (registration) => {
        console.log("ServiceWorker registration successful with scope:", registration.scope)

        // Ensure the service worker is in the 'activated' state
        if (registration.installing) {
          registration.installing.addEventListener("statechange", function (event) {
            if (event.target.state === "activated") {
              // Do any additional setup once the service worker is ready
            }
          })
        }
      },
      (error) => {
        console.log("ServiceWorker registration failed:", error)
      }
    )
  </script>
  <script type="module" src="./src/index.js"></script>
  <div id="root">Standby for launch...</div>
</html>
